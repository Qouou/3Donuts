function ea(b){var c=new XMLHttpRequest;c.open("GET",a.mb+a.save,!0);c.withCredentials=!1;c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&0!==c.status||b(c.responseText)};c.send()}function ja(){for(var b=a.bc,c=Array(b),f=0;f<b;++f)c[f]=0;return c}function ra(b,c,f){b=Math.min(Math.max((f-b)/(c-b),0),1);return b*b*(3-2*b)}function ta(b,c,f){return Math.min(Math.max((f-b)/(c-b),0),1)}function ua(b,c,f,g){return Math.pow(Math.min(Math.max((g-b)/(c-b),0),1),f)}
function va(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function wa(b,c){var f=c%8;return b[(c-f)/8]>>7-f&1}
function Ea(b){var c=JSON.parse(b);b=c.ne;var f=c.nf,g=c.n;var p="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var u=p.length;c=new Uint8Array(u);for(var r=0;r<u;++r)c[r]=p.charCodeAt(r);p=new Float32Array(g);u=new Float32Array(f);r=b+f+1;for(var t=0;t<g;++t){for(var d=r*t,w=0===wa(c,d)?1:-1,B=d+1,e=1,y=0,h=B+b-1;h>=B;--h)y+=e*wa(c,h),e*=2;B=y;d=d+1+b;e=u.length;y=0;for(h=d;h<d+e;++h)u[y]=wa(c,h),++y;for(e=d=0;e<f;++e)d+=u[e]*Math.pow(2,-e-1);p[t]=0===d&&0===
B?0:w*(1+d)*Math.pow(2,1+B-Math.pow(2,b-1))}return p}
var C=function(){function b(q,m,H){m=q.createShader(m);q.shaderSource(m,H);q.compileShader(m);return q.getShaderParameter(m,q.COMPILE_STATUS)?m:!1}function c(q,m,H){m=b(q,q.VERTEX_SHADER,m);H=b(q,q.FRAGMENT_SHADER,H);q===x&&r.push(m,H);var L=q.createProgram();q.attachShader(L,m);q.attachShader(L,H);q.linkProgram(L);return L}function f(q,m){void 0===m.ea&&(m.ea="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===m.ha&&(m.ha=
["a0"]);void 0===m.$&&(m.$=[2]);if(void 0===m.precision||"highp"===m.precision)m.precision=e;m.id=w++;void 0!==m.Kd&&m.Kd.forEach(function(L,Y){m.b=m.b.replace(L,m.Aa[Y])});m.lb=0;m.$.forEach(function(L){m.lb+=4*L});m.T=c(q,m.ea,"precision "+m.precision+" float;\n"+m.b);m.i={};m.c.forEach(function(L){m.i[L]=q.getUniformLocation(m.T,L)});m.attributes={};m.aa=[];m.ha.forEach(function(L){var Y=q.getAttribLocation(m.T,L);m.attributes[L]=Y;m.aa.push(Y)});if(m.f){q.useProgram(m.T);d=m;t=m.id;for(var H in m.f)q.uniform1i(m.i[H],
m.f[H])}m.Va=!0}function g(q){Fa.Pd(M);t!==q.id&&(M.D(),t=q.id,d=q,x.useProgram(q.T),q.aa.forEach(function(m){0!==m&&x.enableVertexAttribArray(m)}))}function p(q,m,H){f(q,m,H);q.useProgram(m.T);q.enableVertexAttribArray(0);t=-1;return d=m}function u(){return{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1"],f:{u1:0}}}var r=[],t=-1,d=null,w=0,B=!1,e="highp",y=["u1"],h=["u0"],D={u1:0},K={u0:0},A={u1:0,u2:1},n={u3:0},v={s0:u(),s1:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
c:y,f:D,precision:"lowp"},s2:{b:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",c:["u1","u2"],f:A},s3:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",c:y,f:D},s4:{b:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",c:["u1","u2"],f:A},s5:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",
c:y,f:D},s6:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",c:y,f:D},s7:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",c:["u0","u4"],f:K},s8:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",c:["u0","u4"],f:K},s9:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
c:y,f:D},s10:{b:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",c:["u1","u5","u6"],f:{u1:0,u5:1}},s11:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",c:["u1","u7"],f:D},s12:{b:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
c:["u1","u8"],f:D},s13:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",c:h,f:K},s14:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",c:h,f:K},s15:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",c:h,f:K},s16:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",
c:h,f:K},s17:{b:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",c:["u0","u6","u9"],f:{u0:0,u6:1,u9:2}},s18:{b:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",c:h,f:K},s19:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",
c:h,f:K},s20:{b:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",c:["u0","u10","u11"],f:{u0:0,u10:1}},s21:{b:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
c:["u1","u12"],f:D},s22:{b:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",c:["u13","u14","u15"],f:{u14:0,u13:1,u15:2}},s23:{b:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",c:["u14","u13","u16"],f:{u14:0,u13:1}},s24:{b:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
c:"u13 u14 u16 u20 u17 u18 u19".split(" "),f:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6}},s25:{b:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",c:"u13 u14 u16 u22 u23 u24 u21".split(" "),f:{u14:0,
u13:1,u21:2}},s26:{b:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",c:["u13","u14"],f:{u14:0,u13:1}},s27:{b:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",c:["u1","u21","u25"],f:{u1:0,u21:1}},s28:{b:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
c:y,f:D,precision:"lowp"},s29:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",c:["u1","u26"],f:D,precision:"lowp"},s30:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
c:["u1","u26"],f:D,precision:"lowp"},s31:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
c:["u1","u2","u27"],f:A},s32:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",c:["u1","u2","u27"],f:A},s33:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
c:["u3","u7"],f:n},s34:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",c:["u3","u7"],f:n},s35:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
c:["u1"],f:D,precision:"lowp"},s36:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",c:["u7","u1"],f:D,precision:"lowp"},s37:{b:"uniform sampler2D u1,u28,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u28,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
c:["u1","u28","u29"],f:{u1:0,u28:1,u29:2}}},E={s38:{b:"uniform float u16,u30;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:["u16","u13","u14","u21","u30"],Aa:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{b:"uniform float u16,u30,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:"u16 u24 u13 u14 u21 u30".split(" "),Aa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},M={va:function(){return B},j:function(){if(!B){e="highp";for(var q in v)f(x,v[q],q);C.set("s0");x.enableVertexAttribArray(0);B=!0}},xc:function(q){q.forEach(function(m){M.qb(m)})},qb:function(q){v[q.id]=q;f(x,q,q.id)},Rb:function(q,m,H){m||(m=q);v[m]=Object.create(E[q]);v[m].hd=!0;E[q].Aa&&E[q].Aa.forEach(function(L,Y){v[m].b=v[m].b.replace(new RegExp(L,"g"),H[Y])});f(x,v[m],m)},set:function(q){g(v[q])},Ba:function(q){return p(q,
u(),"s40")},gb:function(q){return p(q,{b:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",c:[],precision:"highp"},"s41")},Sc:function(q){return"undefined"===typeof v[q]?!1:v[q].Va},D:function(){-1!==t&&(t=-1,d.aa.forEach(function(q){0!==q&&x.disableVertexAttribArray(q)}))},ib:function(){var q=0;d.aa.forEach(function(m,H){H=d.$[H];x.vertexAttribPointer(m,H,x.FLOAT,!1,d.lb,q);q+=4*H})},le:function(){x.enableVertexAttribArray(0)},Ca:function(){M.Da(x)},Da:function(q){q.vertexAttribPointer(d.aa[0],2,q.FLOAT,
!1,8,0)},Ne:function(q,m){x.uniform1i(d.i[q],m)},B:function(q,m){x.uniform1f(d.i[q],m)},ca:function(q,m,H){x.uniform2f(d.i[q],m,H)},Oe:function(q,m){x.uniform2fv(d.i[q],m)},Pe:function(q,m){x.uniform3fv(d.i[q],m)},oc:function(q,m,H,L){x.uniform3f(d.i[q],m,H,L)},Qe:function(q,m,H,L,Y){x.uniform4f(d.i[q],m,H,L,Y)},hb:function(q,m){x.uniform4fv(d.i[q],m)},Re:function(q,m){x.uniformMatrix2fv(d.i[q],!1,m)},Se:function(q,m){x.uniformMatrix3fv(d.i[q],!1,m)},Te:function(q,m){x.uniformMatrix4fv(d.i[q],!1,
m)},G:function(q,m){M.set(q);m.forEach(function(H){switch(H.type){case "4f":x.uniform4fv(d.i[H.name],H.value);break;case "3f":x.uniform3fv(d.i[H.name],H.value);break;case "2f":x.uniform2fv(d.i[H.name],H.value);break;case "1f":x.uniform1f(d.i[H.name],H.value);break;case "1i":x.uniform1i(d.i[H.name],H.value);break;case "mat2":x.uniformMatrix2fv(d.i[H.name],!1,H.value);break;case "mat3":x.uniformMatrix3fv(d.i[H.name],!1,H.value);break;case "mat4":x.uniformMatrix4fv(d.i[H.name],!1,H.value)}})},ve:function(){return"lowp"},
h:function(){x.disableVertexAttribArray(0);M.D();for(var q in v){var m=v[q];m.Va&&(m.Va=!1,x.deleteProgram(m.T));m.hd&&delete v[q]}r.forEach(function(H){x.deleteShader(H)});r.splice(0);w=0;B=!1}};return M}(),x=null,Ma=function(){function b(e){console.log("ERROR in ContextFF: ",e);return!1}function c(e){function y(){Ga.h();D.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;var h=document.createElement("canvas");h.setAttribute("width",
1);h.setAttribute("height",1);var D=null;try{D=h.getContext("webgl2",e)}catch(K){return!1}if(!D)return!1;f(D);Ka.Bb(D);e=Ka.Na(D);if(!e.M&&!e.N)return y(),!1;e=Ga.wb(D,e);y();return e?!0:!1}function f(e){e.clearColor(0,0,0,0);e.disable(e.DEPTH_TEST);e.disable(e.BLEND);e.disable(e.DITHER);e.disable(e.STENCIL_TEST);e.disable(e.SCISSOR_TEST);e.GENERATE_MIPMAP_HINT&&e.hint(e.GENERATE_MIPMAP_HINT,e.FASTEST);e.disable(e.SAMPLE_ALPHA_TO_COVERAGE);e.disable(e.SAMPLE_COVERAGE);e.depthFunc(e.LEQUAL);e.clearDepth(1)}
var g=null,p=null,u=null,r=null,t=!0,d=null,w=null,B={o:function(){return g.width},I:function(){return g.height},qa:function(){return g},oe:function(){return x},O:function(){return t},flush:function(){x.flush()},Vc:function(){d||(d=new Uint8Array(g.width*g.height*4));x.readPixels(0,0,g.width,g.height,x.RGBA,x.UNSIGNED_BYTE,d);return d},qe:function(){return g.toDataURL("image/jpeg")},re:function(){La.C();p||(p=document.createElement("canvas"),u=p.getContext("2d"));p.width=g.width;p.height=g.height;
for(var e=B.Vc(),y=u.createImageData(p.width,p.height),h=p.width,D=p.height,K=y.data,A=0;A<D;++A)for(var n=D-A-1,v=0;v<h;++v){var E=4*(A*h+v),M=4*(n*h+v);K[E]=e[M];K[E+1]=e[M+1];K[E+2]=e[M+2];K[E+3]=e[M+3]}u.putImageData(y,0,0);return p.toDataURL("image/png")},pe:function(e){!p&&e&&(p=document.createElement("canvas"),u=p.getContext("2d"));var y=e?p:document.createElement("canvas");y.width=g.width;y.height=g.height;(e?u:y.getContext("2d")).drawImage(g,0,0);return y},j:function(e){e.Ab&&!e.zb?g=document.getElementById(e.Ab):
e.zb&&(g=e.zb);g||(g=document.createElement("canvas"));g.width=e&&void 0!==e.width?e.width:512;g.height=e&&void 0!==e.height?e.height:512;"undefined"===typeof e&&(e={});void 0===e.premultipliedAlpha&&(e.premultipliedAlpha=!1);void 0===e.Ya&&(e.Ya=!0);void 0===e.antialias&&(e.antialias=!1);if(!x){var y={antialias:e.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:e.premultipliedAlpha,stencil:!1,depth:e.Ya};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(y.antialias=!1);var h=c(y);!h&&y.antialias&&(y.antialias=!1,h=c(y));h&&(x=g.getContext("webgl2",y));x?t=!0:((x=g.getContext("webgl",y))||(x=g.getContext("experimental-webgl",y)),t=!1)}if(!x)return b("WebGL1 and 2 are not enabled");(r=x.getExtension("WEBGL_lose_context"))&&e.cc&&(w=e.cc,g.addEventListener("webglcontextlost",w,!1));if(!Ka.j())return b("Not enough GL capabilities");f(x);C.j();J.j();return Ga.wb(x,Ka.Uc())?!0:b("Cannot filter float textures")},h:function(){x&&Ka.h();r&&w&&(g.removeEventListener("webglcontextlost",
w,!1),w=null);d=u=p=g=null}};return B}(),Fa=function(){function b(){null===c&&("undefined"!==typeof C?c=C:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;b();return{Pd:function(f){c!==f&&(c&&c.D(),c=f)},va:function(){return c.va()},Ca:function(){return c.Ca()},Da:function(f){return c.Da(f)},ib:function(){return c.ib()},D:function(){return c.D()},set:function(f){return c.set(f)},Ba:function(f){b();return c.Ba(f)},gb:function(f){b();return c.gb(f)},h:function(){return c.h()}}}(),P=function(){function b(l){x.bindTexture(x.TEXTURE_2D,
l)}function c(l){L[0]=l;l=Y[0];var I=l>>16&32768,O=l>>12&2047,k=l>>23&255;return 103>k?I:142<k?I|31744|((255==k?0:1)&&l&8388607):113>k?(O|=2048,I|(O>>114-k)+(O>>113-k&1)):I=(I|k-112<<10|O>>1)+(O&1)}function f(l){var I=new Uint16Array(l.length);l.forEach(function(O,k){I[k]=c(O)});return I}function g(){if(null!==ka.Ta)return ka.Ta;var l=u(f([1,1,1,1]));return null===l?!0:ka.Ta=l}function p(){if(null!==ka.Ua)return ka.Ua;var l=u(new Uint8Array([255,255,255,255]));return null===l?!0:ka.Ua=l}function u(l){if(!Fa.va()||
!K)return null;var I=null;try{var O=x.getError();if("FUCKING_BIG_ERROR"===O)return!1;I=F.instance({isFloat:!1,v:!0,array:l,width:1});O=x.getError();if(O!==x.NO_ERROR)return!1}catch(k){return!1}La.C();x.viewport(0,0,1,1);x.clearColor(0,0,0,0);x.clear(x.COLOR_BUFFER_BIT);Fa.set("s0");I.ub(0);J.g(!0,!0);l=new Uint8Array(4);x.readPixels(0,0,1,1,x.RGBA,x.UNSIGNED_BYTE,l);l=.9<l[0];I.remove();La.H();return l}var r=0,t=null,d=0,w=null,B=null,e=null,y=null,h=null,D=null,K=!1,A=[],n={isFloat:!1,isPot:!0,isLinear:!1,
isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,u:null,gd:!1,v:!1,S:null,wa:4,Za:0},v=!1,E=null,M=null,q=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],m=!1,H=!1,L=new Float32Array(1),Y=new Int32Array(L.buffer),ka={Ta:null,Ua:null},F={j:function(){K||(h=[x.RGB,null,x.RGB,x.RGBA],D=[x.RGB,null,x.RGB,x.RGBA],t=[x.TEXTURE0,x.TEXTURE1,x.TEXTURE2,x.TEXTURE3,x.TEXTURE4,x.TEXTURE5,x.TEXTURE6,x.TEXTURE7],m="undefined"!==
typeof JEContext,H="undefined"!==typeof Ka,m&&JEContext.He()&&t.push(x.TEXTURE8,x.TEXTURE9),w=[-1,-1,-1,-1,-1,-1,-1,-1],y=[x.UNSIGNED_BYTE,x.FLOAT,x.FLOAT],K=!0)},ed:function(){if(!B){for(var l=new Float32Array(16384),I=0;16384>I;++I)l[I]=2*Math.random()-1;B={random:F.instance({isFloat:!0,isPot:!0,array:l,width:64}),sc:F.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}F.Zd()},Ae:function(){return B.sc},Zd:function(){y[1]=Ka.Ra(x)},Md:function(){D=h=[x.RGBA,x.RGBA,x.RGBA,x.RGBA]},
Hd:function(l,I){C.set("s1");La.C();var O=l.o(),k=l.I();x.viewport(0,0,O,k);l.a(0);J.g(!1,!1);x.readPixels(0,0,O,k,x.RGBA,x.UNSIGNED_BYTE,I)},Ib:function(l,I,O,k,ca,da,X){l.activeTexture(l.TEXTURE0);var ia=l.createTexture();l.bindTexture(l.TEXTURE_2D,ia);ca=ca instanceof Float32Array?ca:new Float32Array(ca);0!==Math.log2(ca.length)%1&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE));l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,
l.NEAREST);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,da);l.texImage2D(l.TEXTURE_2D,0,l.RGBA,O,k,0,l.RGBA,l.FLOAT,ca);l.bindTexture(l.TEXTURE_2D,null);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1);X&&(La.H(),C.set("s0"));l.viewport(0,0,O,k);l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,I,0);l.bindTexture(l.TEXTURE_2D,ia);X?J.g(!0,!0):J.oa(l);l.deleteTexture(ia);K&&(w[0]=-1,e=null,r=0)},instance:function(l){function I(z){var T=
x.getError();if("FUCKING_BIG_ERROR"===T)return!1;x.texImage2D(x.TEXTURE_2D,0,Q,ba,fa,z);T=x.getError();T!==x.NO_ERROR&&ba!==x.RGBA&&(ba=x.RGBA,x.texImage2D(x.TEXTURE_2D,0,Q,ba,fa,z));return!0}function O(){if(!G){b(la);oa&&x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,oa);k.isPot?(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,k.isMirrorX?x.MIRRORED_REPEAT:x.REPEAT),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,k.isMirrorY?x.MIRRORED_REPEAT:x.REPEAT)):(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),
x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE));k.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&x.texParameterf(x.TEXTURE_2D,JEContext.se().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.ae);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,k.isLinear?x.LINEAR:x.NEAREST);k.isLinear?x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,k.isMipmap&&!xa?x.NEAREST_MIPMAP_LINEAR:x.LINEAR):x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,k.isMipmap&&!xa?x.NEAREST_MIPMAP_NEAREST:x.NEAREST);
ba=h[k.wa-1];Q=D[k.wa-1];fa=y[da];if(Ka.O()){var z=x.RGBA32F;ba===x.RGBA&&fa===x.FLOAT?k.isMipmap||k.isLinear?Q=Ga.Wc(x):Ka.xb()?z&&(Q=z):Q=x.RGBA16F||x.RGBA:ba===x.RGB&&fa===x.FLOAT&&z&&(Q=z,ba=x.RGBA)}if(k.v&&!k.isFloat||k.isFloat&&k.isMipmap&&Ga.ld())(z=x.RGBA16F)&&(Q=z),fa=Ka.Ra(x);k.Za&&(Ia=k.Za);k.isSrgb&&4===k.wa&&(ba=JEContext.ye());if(k.u)I(k.u);else if(k.url)I(sa);else if(qa){z=qa;try{"FUCKING_BIG_ERROR"!==x.getError()&&(x.texImage2D(x.TEXTURE_2D,0,Q,R,S,0,ba,fa,z),x.getError()!==x.NO_ERROR&&
(x.texImage2D(x.TEXTURE_2D,0,Q,R,S,0,ba,fa,null),x.getError()!==x.NO_ERROR&&x.texImage2D(x.TEXTURE_2D,0,x.RGBA,R,S,0,x.RGBA,x.UNSIGNED_BYTE,null)))}catch(sb){x.texImage2D(x.TEXTURE_2D,0,Q,R,S,0,ba,fa,null)}k.isKeepArray||(qa=null)}else z=x.getError(),"FUCKING_BIG_ERROR"!==z&&(x.texImage2D(x.TEXTURE_2D,0,Q,R,S,0,ba,fa,null),z=x.getError(),z!==x.NO_ERROR&&(ba=x.RGBA,k.v&&fa!==x.FLOAT&&(fa=x.FLOAT,x.texImage2D(x.TEXTURE_2D,0,Q,R,S,0,ba,fa,null))));if(k.isMipmap)if(!xa&&aa)aa.Qa(),Ja=!0;else if(xa){z=
Math.log2(Math.min(R,S));Aa=Array(1+z);Aa[0]=la;for(var T=1;T<=z;++T){var na=Math.pow(2,T),W=R/na;na=S/na;var ya=x.createTexture();b(ya);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST);x.texImage2D(x.TEXTURE_2D,0,Q,W,na,0,ba,fa,null);b(null);Aa[T]=ya}Ja=!0}b(null);w[r]=-1;oa&&x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!1);ma=!0;k.S&&aa&&(k.S(aa),k.S=null)}}var k=Object.assign({},n,l),ca=d++;null===k.isFlipY&&(k.isFlipY=k.url||k.array?
!0:!1);k.data&&(k.array="string"===typeof k.data?Ea(k.data):k.isFloat?new Float32Array(k.data):new Uint8Array(k.data),k.isFlipY=!1);var da=0,X=k.u?!0:!1,ia=null,Ba=null,Da=!1,Ca=null;k.v=k.v||k.isFloat;k.v&&(da=1);k.gd||Ka.O()||!k.isFloat||!H||Ka.xb()||(k.isFloat=!1);k.isFloat&&(da=2);k.isAnisotropicFiltering&&m&&!JEContext.Ce()&&(k.isAnisotropicFiltering=!1);var la=x.createTexture(),sa=null,qa=!1,R=0,S=0,ma=!1,G=!1,N=!1,Z=null,pa=null,ha=null,U=null,Q=null,ba=null,fa=null,oa=k.isFlipY,bb=(l=k.v&&
k.isMipmap)&&Ga.Hc(),xa=l&&bb?!0:!1,Aa=null,Ia=-1,Ja=!1,za={Wb:!1,vb:null,Jb:null};k.width&&(R=k.width,S=k.height?k.height:R);var aa={get:function(){return la},o:function(){return R},I:function(){return S},Be:function(){return k.url},De:function(){return k.isFloat},Fe:function(){return k.v},Ge:function(){return k.isLinear},Qa:function(){x.generateMipmap(x.TEXTURE_2D)},Fc:function(z,T){xa?(z||(z=aa.Mb()),aa.La(T),b(Aa[z]),w[T]=-1):aa.a(T)},Mb:function(){-1===Ia&&(Ia=Math.log(R)/Math.log(2));return Ia},
Tc:function(z){if(xa){z||(z=aa.Mb());C.set("s11");aa.La(0);for(var T=R,na=S,W=1;W<=z;++W)T/=2,na/=2,C.ca("u7",.25/T,.25/na),x.viewport(0,0,T,na),b(Aa[W-1]),x.framebufferTexture2D(La.sa(),x.COLOR_ATTACHMENT0,x.TEXTURE_2D,Aa[W],0),J.g(!1,1===W);w[0]=-1}else aa.Qa()},La:function(z){z!==r&&(x.activeTexture(t[z]),r=z)},a:function(z){if(!ma)return!1;aa.La(z);if(w[z]===ca)return!1;b(la);w[z]=ca;return!0},ub:function(z){x.activeTexture(t[z]);r=z;b(la);w[z]=ca},l:function(){e=aa;x.framebufferTexture2D(La.sa(),
x.COLOR_ATTACHMENT0,x.TEXTURE_2D,la,0)},F:function(){e=aa;x.viewport(0,0,R,S);x.framebufferTexture2D(La.sa(),x.COLOR_ATTACHMENT0,x.TEXTURE_2D,la,0)},kb:F.kb,resize:function(z,T){R=z;S=T;O()},clone:function(z){z=F.instance({width:R,height:S,v:k.v,isFloat:k.isFloat,isLinear:k.isLinear,isMirrorY:k.isMirrorY,isFlipY:z?!oa:oa,isPot:k.isPot});Fa.set("s0");La.H();z.l();x.viewport(0,0,R,S);aa.a(0);J.g(!0,!0);return z},Qd:function(){x.viewport(0,0,R,S)},remove:function(){x.deleteTexture(la);G=!0;A.splice(A.indexOf(aa),
1);aa=null},refresh:function(){aa.ub(0);oa&&x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!0);X?x.texImage2D(x.TEXTURE_2D,0,Q,ba,x.UNSIGNED_BYTE,k.u):x.texImage2D(x.TEXTURE_2D,0,Q,R,S,0,ba,fa,qa);oa&&x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!1)},yb:function(){var z=R*S*4;pa=[new Uint8Array(z),new Uint8Array(z),new Uint8Array(z),new Uint8Array(z)];Z=[new Float32Array(pa[0].buffer),new Float32Array(pa[1].buffer),new Float32Array(pa[2].buffer),new Float32Array(pa[3].buffer)];ha=new Uint8Array(4*z);U=new Float32Array(ha.buffer);
N=!0},fb:function(){N||aa.yb();x.readPixels(0,0,R,4*S,x.RGBA,x.UNSIGNED_BYTE,ha);for(var z=R*S,T=2*z,na=3*z,W=0;W<z;++W)Z[0][W]=U[W],Z[1][W]=U[W+z],Z[2][W]=U[W+T],Z[3][W]=U[W+na];return Z},Gd:function(){za.Wb||(za.vb=new Uint8Array(R*S*4),za.Jb=new Float32Array(za.buffer),za.Wb=!0);x.readPixels(0,0,R,S,x.RGBA,x.UNSIGNED_BYTE,za.vb);return za.Jb},Oa:function(z){La.C();C.set("s12");aa.a(0);if(z)x.viewport(0,0,R,S),C.hb("u8",.25,.25,.25,.25),J.g(!1,!0);else for(z=0;4>z;++z)x.viewport(0,S*z,R,S),C.hb("u8",
q[z]),J.g(!1,0===z)},Ve:function(z){var T=fa===y[0]&&!p();b(la);oa&&x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!0);T?(Da||(ia=document.createElement("canvas"),ia.width=R,ia.height=S,Ba=ia.getContext("2d"),Ca=Ba.createImageData(R,S),Da=!0),Ca.data.set(z),Ba.putImageData(Ca,0,0),x.texImage2D(x.TEXTURE_2D,0,Q,ba,fa,ia)):x.texImage2D(x.TEXTURE_2D,0,Q,R,S,0,ba,fa,z);w[r]=ca;oa&&x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!1)},We:function(z,T){b(la);T&&x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!0);x.texImage2D(x.TEXTURE_2D,
0,Q,ba,fa,z);w[r]=ca;T&&x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!1)},Le:function(z,T){var na=R*S,W=4*na;z=k.v?z?"RGBE":"JSON":"RGBA";T&&(z=T);T=Ka.O()&&!1;var ya=null;switch(z){case "RGBE":ya="s42";break;case "JSON":ya=T?"s0":"s12";break;case "RGBA":case "RGBAARRAY":ya="s6"}N||("RGBA"===z||"RGBE"===z||"RGBAARRAY"===z?(pa=new Uint8Array(W),N=!0):"JSON"!==z||T||aa.yb());La.C();C.set(ya);aa.a(0);W=null;if("RGBA"===z||"RGBE"===z||"RGBAARRAY"===z){x.viewport(0,0,R,S);J.g(!0,!0);x.readPixels(0,0,R,S,x.RGBA,
x.UNSIGNED_BYTE,pa);if("RGBAARRAY"===z)return{data:pa};v||(E=document.createElement("canvas"),M=E.getContext("2d"),v=!0);E.width=R;E.height=S;na=M.createImageData(R,S);na.data.set(pa);M.putImageData(na,0,0);W=E.toDataURL("image/png")}else if("JSON"===z)if(T)W=new Float32Array(na),x.viewport(0,0,R,S),J.g(!0,!0),x.readPixels(0,0,R,S,x.RGBA,x.FLOAT,W);else{for(W=0;4>W;++W)x.viewport(0,S*W,R,S),C.hb("u8",q[W]),J.g(!W,!W);aa.fb();W=Array(na);for(T=0;T<na;++T)W[4*T]=Z[0][T],W[4*T+1]=Z[1][T],W[4*T+2]=Z[2][T],
W[4*T+3]=Z[3][T]}return{format:z,data:W,width:R,height:S,isMirrorY:k.isMirrorY,isFlipY:"RGBA"===z?k.isFlipY:!k.isFlipY}}};k.isMipmap&&!xa&&ma&&!Ja&&(aa.Qa(),Ja=!0);if(k.url)b(la),x.texImage2D(x.TEXTURE_2D,0,x.RGBA,1,1,0,x.RGBA,x.UNSIGNED_BYTE,null),sa=new Image,sa.ie="Anonymous",sa.crossOrigin="Anonymous",sa.src=k.url,sa.onload=function(){R=sa.width;S=sa.height;O()};else if(k.u){var Qa=function(){R=void 0!==k.u.videoWidth?k.u.videoWidth:k.u.width;S=void 0!==k.u.videoHeight?k.u.videoHeight:k.u.height;
R?O():setTimeout(Qa,1)};Qa()}else k.array?(k.v&&!k.isFloat?k.array instanceof Uint16Array?(qa=k.array,O()):g()?(qa=f(k.array),O()):(O(),F.Ib(x,la,aa.o(),aa.I(),k.array,oa,!0)):(qa=k.isFloat?k.array instanceof Float32Array?k.array:new Float32Array(k.array):k.array instanceof Uint8Array?k.array:new Uint8Array(k.array),O()),k.isKeepArray||(qa&&qa!==k.array&&(qa=null),delete k.array)):O();aa.xe=aa.o;k.S&&ma&&(k.S(aa),k.S=null);A.push(aa);return aa},C:function(l){l!==r&&(x.activeTexture(t[l]),r=l);w[l]=
-1;b(null)},de:function(l){B.random.a(l)},kb:function(){e=null;x.framebufferTexture2D(La.sa(),x.COLOR_ATTACHMENT0,x.TEXTURE_2D,null,0)},reset:function(){for(var l=0;l<t.length;++l)w[l]=-1;r=-1},Ke:function(){r=-1},Xd:function(){for(var l=0;l<t.length;++l)F.C(l)},Kb:function(){B&&(B.random.remove(),B.sc.remove())},Ue:function(l,I){if("RGBA"===l.format||"RGBE"===l.format){var O=new Image;O.src=l.data;O.onload=function(){F.instance({isMirrorY:l.isMirrorY,isFlipY:l.isFlipY,isFloat:!1,u:O,S:function(k){if("RGBA"===
l.format)I(k);else{var ca=l.width,da=l.height,X=F.instance({isMirrorY:l.isMirrorY,isFloat:!0,width:ca,height:da,isFlipY:l.isFlipY});La.H();x.viewport(0,0,ca,da);C.set("s43");X.l();k.a(0);J.g(!0,!0);F.C(0);I(X);x.flush();setTimeout(k.remove,50)}}})}}else"JSON"===l.format?I(F.instance({isFloat:!0,isFlipY:l.isFlipY,width:l.width,height:l.height,array:new Float32Array(l.data)})):I(!1)},h:function(){e&&(La.H(),F.kb(),La.C());F.Xd();A.slice(0).forEach(function(l){l.remove()});A.splice(0);K=!1;d=0;"undefined"!==
typeof Ga&&Ga.h()}};return F}(),Na={instance:function(b){var c=[P.instance(b),P.instance(b)],f=[c[1],c[0]],g=f,p={nc:function(u){g[1].l();g[0].a(u);p.rc()},Me:function(u){g[1].F();g[0].a(u);p.rc()},rc:function(){g=g===c?f:c},refresh:function(){g[0].refresh();g[1].refresh()},a:function(u){g[0].a(u)},ce:function(u){g[1].a(u)},Zc:function(){return g[0]},remove:function(){g[0].remove();g[1].remove();g=null}};return p}},J=function(){function b(d){var w={L:null,s:null};w.L=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,
w.L);d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),d.STATIC_DRAW);w.s=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,w.s);d.bufferData(d.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),d.STATIC_DRAW);return w}var c=null,f=0,g=!1,p=[],u=-2,r=-2,t={reset:function(){r=u=-2},j:function(){g||(c=b(x),t.Ma(),g=!0)},instance:function(d){var w=f++,B=d.s?d.s.length:0,e="undefined"===typeof d.mode?x.STATIC_DRAW:d.mode,y=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,y);x.bufferData(x.ARRAY_BUFFER,
d.L instanceof Float32Array?d.L:new Float32Array(d.L),e);u=w;var h=null,D=null,K=null;if(d.s){h=x.createBuffer();x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,h);var A=null;65536>d.s.length?(A=Uint16Array,D=x.UNSIGNED_SHORT,K=2):(A=Uint32Array,D=x.UNSIGNED_INT,K=4);A=d.s instanceof A?d.s:new A(d.s);x.bufferData(x.ELEMENT_ARRAY_BUFFER,A,e);r=w}var n={Gc:function(v){u!==w&&(x.bindBuffer(x.ARRAY_BUFFER,y),u=w);v&&Fa.ib()},Dc:function(){r!==w&&(x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,h),r=w)},bind:function(v){n.Gc(v);
n.Dc()},je:function(){x.drawElements(x.TRIANGLES,B,D,0)},ke:function(v,E){x.drawElements(x.TRIANGLES,v,D,E*K)},remove:function(){x.deleteBuffer(y);d.s&&x.deleteBuffer(h);n=null}};p.push(n);return n},Ma:function(){-1!==u&&(x.bindBuffer(x.ARRAY_BUFFER,c.L),u=-1);-1!==r&&(x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,c.s),r=-1)},g:function(d,w){d&&J.Ma();w&&Fa.Ca();x.drawElements(x.TRIANGLES,3,x.UNSIGNED_SHORT,0)},oa:function(d){d=d||x;var w=b(d);d.bindBuffer(d.ARRAY_BUFFER,w.L);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,
w.s);Fa.Da(d);d.drawElements(d.TRIANGLES,3,d.UNSIGNED_SHORT,0);d.deleteBuffer(w.L);d.deleteBuffer(w.s);t.reset();g&&(t.Ma(),Fa.Ca())},Kb:function(){var d=x,w=c;d.deleteBuffer(w.L);d.deleteBuffer(w.s)},h:function(){t.Kb();p.forEach(function(d){d.remove()});x.bindBuffer(x.ARRAY_BUFFER,null);x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,null);t.reset();g=!1;p.splice(0);f=0}};return t}(),La=function(){var b=null,c=null,f=null,g=!1,p=[],u={m:-2,Hb:1},r={va:function(){return g},j:function(){if(!g){b=x.createFramebuffer();
var t=Ka.O();c=t&&x.DRAW_FRAMEBUFFER?x.DRAW_FRAMEBUFFER:x.FRAMEBUFFER;f=t&&x.READ_FRAMEBUFFER?x.READ_FRAMEBUFFER:x.FRAMEBUFFER;g=!0}},te:function(){return c},Xc:function(){return f},sa:function(){return x.FRAMEBUFFER},we:function(){return u},me:function(){return b},instance:function(t){void 0===t.Vb&&(t.Vb=!1);var d=t.da?t.da:null,w=t.width,B=void 0!==t.height?t.height:t.width,e=b,y=null,h=!1,D=!1,K=0;d&&(w=w?w:d.o(),B=B?B:d.I());var A={mc:function(){h||(e=x.createFramebuffer(),h=!0,K=u.Hb++)},wc:function(){A.mc();
A.l();y=x.createRenderbuffer();x.bindRenderbuffer(x.RENDERBUFFER,y);x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH_COMPONENT16,w,B);x.framebufferRenderbuffer(c,x.DEPTH_ATTACHMENT,x.RENDERBUFFER,y);x.clearDepth(1)},bind:function(n,v){K!==u.m&&(x.bindFramebuffer(c,e),u.m=K);d&&d.l();v&&x.viewport(0,0,w,B);n&&x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT)},be:function(){K!==u.m&&(x.bindFramebuffer(c,e),u.m=K)},clear:function(){x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT)},ge:function(){x.clear(x.COLOR_BUFFER_BIT)},
he:function(){x.clear(x.DEPTH_BUFFER_BIT)},Qd:function(){x.viewport(0,0,w,B)},l:function(){K!==u.m&&(x.bindFramebuffer(c,e),u.m=K)},rtt:function(n){d=n;u.m!==K&&(x.bindFramebuffer(x.FRAMEBUFFER,e),u.m=K);n.l()},C:function(){x.bindFramebuffer(c,null);u.m=-1},resize:function(n,v){w=n;B=v;y&&(x.bindRenderbuffer(x.RENDERBUFFER,y),x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH_COMPONENT16,w,B))},remove:function(){e===b||D||(x.bindFramebuffer(c,e),x.framebufferTexture2D(c,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,
null,0),y&&x.framebufferRenderbuffer(c,x.DEPTH_ATTACHMENT,x.RENDERBUFFER,null),x.bindFramebuffer(c,null),x.deleteFramebuffer(e),y&&x.deleteRenderbuffer(y));D=!0}};t.Vb&&A.wc();p.push(A);return A},C:function(){x.bindFramebuffer(c,null);u.m=-1},Yd:function(){x.bindFramebuffer(c,null);x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT);x.viewport(0,0,Ka.o(),Ka.I());u.m=-1},reset:function(){u.m=-2},H:function(){0!==u.m&&(x.bindFramebuffer(c,b),u.m=0)},clear:function(){x.viewport(0,0,Ka.o(),Ka.I());x.clear(x.COLOR_BUFFER_BIT)},
h:function(){r.C();p.forEach(function(t){t.remove()});x.deleteFramebuffer(b);r.reset();g=!1;p.splice(0);u.m=-2;u.Hb=1}};return r}(),Ka=function(){function b(){f="undefined"===typeof Ma?JEContext:Ma;g=!0}function c(n,v){for(var E=0;E<n.length;++E){var M=v.getExtension(n[E]);if(M)return M}return null}var f=null,g=!1,p=!1,u=null,r=null,t=!1,d=null,w=!1,B=null,e=!1,y=null,h=null,D={M:!0,N:!0,Pa:!0},K="undefined"===typeof window?{}:window,A={j:function(){if(g)return!0;b();var n=x;if(!p){u=A.Eb(n);if((t=
(K.GL_EXT_FLOAT=u)?!0:!1)||A.O())r=A.Fb(n),K.GL_EXT_FLOATLINEAR=r;p=!0}if(!e){if(d=A.na(n))w=!0,K.GL_EXT_HALFFLOAT=d;if(w||A.O())B=A.Gb(n),K.GL_EXT_HALFFLOATLINEAR=B;e=!0}y=A.Cb(n);K.GL_EXT_COLORBUFFERFLOAT=y;h=A.Db(n);K.GL_EXT_COLORBUFFERHALFFLOAT=h;La.j();P.j();if(!A.Oc())return!1;J.j();P.ed();return!0},o:function(){g||b();return f.o()},I:function(){g||b();return f.I()},O:function(){g||b();return f.O()},Bb:function(n){A.Cb(n);A.Db(n);A.Eb(n);A.Fb(n);A.na(n);A.Gb(n)},Cb:c.bind(null,["EXT_color_buffer_float",
"WEBGL_color_buffer_float","OES_color_buffer_float"]),Db:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Eb:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Fb:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),na:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Gb:c.bind(null,["OES_texture_half_float_linear",
"MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Ra:function(n){var v=A.na(n);return v&&v.HALF_FLOAT_OES?v.HALF_FLOAT_OES:n.HALF_FLOAT||n.FLOAT},Uc:function(){return D},xb:function(){return D.M},fe:function(){return D.N},ee:function(){return D.Pa},Ga:function(n,v,E){function M(){n.bindTexture(n.TEXTURE_2D,null);n.bindFramebuffer(q,null);n.deleteTexture(L);n.deleteFramebuffer(H)}var q=n.FRAMEBUFFER,m=n.NEAREST,H=n.createFramebuffer();n.bindFramebuffer(q,H);var L=n.createTexture();
n.bindTexture(n.TEXTURE_2D,L);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,m);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,m);n.texImage2D(n.TEXTURE_2D,0,v,1,1,0,n.RGBA,E,null);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,L,0);if(n.checkFramebufferStatus(n.READ_FRAMEBUFFER||n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE)return M(),!1;Fa.gb(n);n.clearColor(0,0,0,0);n.viewport(0,0,1,1);n.disable(n.DEPTH_TEST);n.clear(n.COLOR_BUFFER_BIT);J.oa(n);n.bindFramebuffer(q,null);
Fa.Ba(n);n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,L);J.oa(n);v=new Uint8Array(4);n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,v);M();return 3<Math.abs(v[0]-127)?!1:!0},Na:function(n){var v={M:!1,N:!1};n.disable(n.BLEND);n.clearColor(0,0,0,0);n.clear(n.COLOR_BUFFER_BIT);n.RGBA32F&&A.Ga(n,n.RGBA32F,n.FLOAT)&&(v.M=!0);!v.M&&A.Ga(n,n.RGBA,n.FLOAT)&&(v.M=!0);var E=A.Ra(n);n.RGBA16F&&A.Ga(n,n.RGBA16F,E)&&(v.N=!0);!v.N&&A.Ga(n,n.RGBA,E)&&(v.N=!0);return v},Pc:function(){var n=La.instance({width:1});
n.mc();var v=P.instance({width:1,isFloat:!0,wa:3});n.l();v.l();x.flush();x.checkFramebufferStatus(La.Xc())!==x.FRAMEBUFFER_COMPLETE?(P.Md(),D.Pa=!1):D.Pa=!0;n.remove();v.remove()},Oc:function(){var n=A.Na(x);Object.assign(D,n);if(!D.M&&!D.N)return!1;A.Pc();return!0},h:function(){P.h();Fa.h();La.h();J.h();g=!1}};return A}(),Ga=function(){function b(v,E,M,q){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,q?h.NEAREST_MIPMAP_NEAREST:h.LINEAR);var m=null;if(null!==M)try{m=h.getError();if("FUCKING_BIG_ERROR"===
m)return!1;h.texImage2D(h.TEXTURE_2D,0,v,2,2,0,h.RGBA,E,M);m=h.getError();if(m!==h.NO_ERROR)return!1}catch(H){return!1}q&&h.generateMipmap(h.TEXTURE_2D);h.clear(h.COLOR_BUFFER_BIT);J.oa(h);m=h.getError();if("FUCKING_BIG_ERROR"===m)return!1;h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,B);m=h.getError();m===h.INVALID_OPERATION&&"undefined"!==typeof h.PIXEL_PACK_BUFFER&&(h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,B),m=h.getError());if(m!==h.NO_ERROR)return!1;if(M=
0!==B[0])d.fc=E,d.Ub=v;return M}function c(v,E){return D.M&&b(v,h.FLOAT,new Float32Array(y),E)?(t=r.ob,!0):!1}function f(v,E,M){if(!D.N)return!1;var q=Ka.na(h);if(q&&q.HALF_FLOAT_OES&&b(v,q.HALF_FLOAT_OES,new Uint16Array(y),E)||h.HALF_FLOAT&&b(v,h.HALF_FLOAT,new Uint16Array(y),E)||b(v,h.FLOAT,new Float32Array(y),E))return t=r.Z,!0;h.bindTexture(h.TEXTURE_2D,M);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,null);h.bindFramebuffer(d.ma,n);P.Ib(h,M,1,1,new Float32Array(y),!1,!1);h.bindFramebuffer(d.ma,
null);h.bindTexture(h.TEXTURE_2D,M);return b(v,null,null,E)?(t=r.Z,!0):!1}function g(v,E,M){w=!0;if(f(v,!0,M)||c(E,!0))return!0;w=!1;return f(v,!1,M)||c(E,!1)?!0:!1}function p(v){if(t===r.D){h=v||x;t=r.RGBA8;w=!0;Ka.Bb(h);D||(D=Ka.Na(h));La.reset();n=h.createFramebuffer();d.ma=h.DRAW_FRAMEBUFFER||h.FRAMEBUFFER;h.bindFramebuffer(d.ma,null);h.clearColor(0,0,0,0);h.viewport(0,0,1,1);C.D();K=C.Ba(h);v=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,v);h.texParameteri(h.TEXTURE_2D,
h.TEXTURE_WRAP_S,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);A=v;var E=v=h.RGBA,M=h.RGBA16F,q=h.RGBA32F;q&&(v=q);M&&(E=M);if((M||q)&&g(E,v,A))return u(),!0;v=E=h.RGBA;if(g(E,v,A))return u(),!0;t=r.RGBA8;u();return!1}}function u(){h.deleteProgram(K.T);h.deleteTexture(A);A=K=null}var r={D:-1,ob:3,Z:2,RGBA8:0},t=r.D,d={fc:null,Ub:null,ma:null},w=!0,B=new Uint8Array(4),e=[.8,1,.8,1],y=e.concat(e,e,e),h=null,D=null,K=null,
A=null,n=null;return{Hc:function(v){p(v);return w},wb:function(v,E){t===r.D&&(typeof("undefined"!==E)&&(D=E),p(v));return t!==r.RGBA8},Ee:function(v){p(v);return t===r.ob},ld:function(v){p(v);return t===r.Z},ue:function(v){p(v);return d.fc},Wc:function(v){p(v);return d.Ub},h:function(){h=null;w=!0;t=r.D;D=null}}}(),Oa={instance:function(b){var c=P.instance(b.alpha),f=P.instance(b.beta);return{Rc:function(){c.a(1);f.a(2)}}}},Ra={instance:function(b){var c=null,f=!1,g=!1,p=null,u=!1,r=!1,t=null,d="undefined"===
typeof b.preprocessing?!1:b.preprocessing,w="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(f=!0,a&&void 0!==a.Bc&&(b.mask=a.Bc+b.mask),c=P.instance({isFloat:!1,url:b.mask}));var B=!1;b.customInputShader&&(B="s44",C.qb({name:"_",id:B,b:b.customInputShader,c:["uSource"],precision:"lowp"}),C.G(B,[{type:"1i",name:"_",value:0}]));switch(d){case "sobel":t="s31";u=!0;break;case "meanNormalization":t="s32";u=!0;break;case "grayScale":t="s28";u=!1;break;case "grayScaleTilt":t=
"s29";r=!0;u=!1;break;case "rgbGrayTilt":t="s30";r=!0;u=!1;break;case "copy":t=B?B:"s0";break;case "inputLightRegulation":t=B?B:"s28";p=Pa.instance({Tb:w,ec:b.size,Zb:b.nBlurPass,kd:!1});g=!0;break;case "direct":case "none":t=!1;break;default:t="s3"}r&&C.G(t,[{name:"u26",type:"1f",value:b.tilt}]);f&&(t+="Mask");var e=P.instance({isFloat:!1,isPot:!1,width:b.size}),y={o:function(){return w},Sa:function(){return y.o()},bd:function(){return g?p.Nb():e},A:function(){La.H();t&&(C.set(t),u&&C.B("u27",1/
b.size),e.F(),f&&c.a(1),J.g(!1,!1),e.a(0),g&&p.process(e))},h:function(){e.remove();f&&c.remove()}};return y}},Xa={instance:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var c={input:null,ja:null,Wa:null,K:null,ya:null,cb:null,eb:null},f=null,g=[],p=[],u=!1,r=null,t=!0,d=-1,w=b.isReorganize?b.isReorganize:!1,B=b.kernelsNumber?!0:!1,e=b.dynPelu?Oa.instance(b.dynPelu):!1,y=e?!0:!1,h={isEnabled:!1};b.jd?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.za.Sa(),t=
!1):"full"===b.connectivityUp&&(b.sparsity=b.za.Sa());var D={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],K=b.sparsity*b.sparsity,A=!1,n=b.size,v="";if(b.maxPooling){switch(b.maxPooling.size){case 2:v="s33";break;case 4:v="s34"}A=!0;n/=b.maxPooling.size;c.cb=P.instance({isFloat:!0,isPot:!1,width:n})}var E=void 0!==b.Bd&&b.Bd?!0:!1,M=null,q=null,m=null;if(E){M="s45"+b.index.toString();C.Rb("s45",M,[((b.normalization.n-1)/2).toFixed(1)]);
C.G(M,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u31",value:b.normalization.k}]);var H={isFloat:!0,isPot:!0,width:b.size};q=P.instance(H);m=P.instance(H)}var L=-1,Y=null;t&&(c.K=P.instance({isFloat:!0,isPot:!1,width:b.size}));c.ja=P.instance(b.bias);var ka={o:function(){return b.size},Sa:function(){return n},Lb:function(){return b.classesCount},Ec:function(F){f.a(F)},
Ed:function(){b.remap&&b.remap.isEnabled&&(h={isEnabled:!0,md:P.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(F){return b.parent.$c(F)}),depth:b.remap.depth})},Od:function(){switch(b.connectivityUp){case "direct":Y=Sa.instance(b.connectivity);break;case "square":Y=Ta.instance(b.connectivity);break;case "squareFast":Y=Ua.instance(b.connectivity,b.activation);break;case "full":Y=Va.instance(b.connectivity);
break;case "conv":d=b.kernelsNumber,Y=Wa.instance(b.connectivity),w&&(c.ya=P.instance({width:n,isFloat:!0,isFlipY:!1,isPot:!1}))}if(Y.Y){var F=b.size*b.sparsity;L=Math.log(F/b.size)/Math.log(2);c.input=P.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:F,Za:L});c.Wa=P.instance({isFloat:!0,isPot:!0,width:b.size})}},A:function(F){f=F;Y.Y?(c.input.F(),B&&c.ja.a(2),Y.A(h),c.input.a(0),c.input.Tc(L),c.Wa.F(),B?C.set("s0"):(C.set("s27"),C.B("u25",K),c.ja.a(1)),c.input.Fc(L,0),J.g(!1,!1),C.set(D),E?q.l():
c.K.l(),c.Wa.a(0),y&&e.Rc(),J.g(!1,!1)):(c.K.F(),c.ja.a(1),Y.A());E&&(C.set(M),m.l(),q.a(0),J.g(!1,!1),C.set("s46"),C.B("u6",1),c.K.l(),m.a(1),J.g(!1,!1));if(t)return A?(c.cb.F(),c.K.a(0),C.set(v),C.ca("u7",1/b.size,1/b.size),J.g(!1,!1),F=c.cb):F=c.K,F.a(0),w&&(c.ya.l(),C.set("s21"),C.ca("u12",d,n/d),J.g(!1,!1),F=c.ya,c.ya.a(0)),F;F=c.K;b.disableNormalize||(C.set("gpuRawAvg"===u?"s8":"s7"),C.B("u4",1/b.size),c.eb.F(),c.K.a(0),J.g(!1,!1),F=c.eb);switch(u){case "cpuRGBA2Float":F.Oa(!1);F=ka.Fd(F);r(F);
break;case "cpuMeanFloat":F.Oa(!0);F=F.Gd();r(F);break;case "gpuRawAvg":case "gpuRaw":F.a(0);case "none":r(F)}return!1},Kc:function(F){F&&"undefined"!==typeof F.dc&&(u=F.dc,r=F.Dd);c.K=P.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});F="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var l=0,I=0,O=0;l<F;++l)g.push(I+(b.size-1-O)*b.size),p.push([-1,-1,-1,-1]),++I,I===b.size&&(I=0,++O);b.disableNormalize||(c.eb=P.instance({isFloat:!0,isPot:!0,width:b.size}))},
Fd:function(F){var l=F.fb();g.forEach(function(I,O){p[O][0]=l[0][I];p[O][1]=l[1][I];p[O][2]=l[2][I];p[O][3]=l[3][I]});return p},h:function(){for(var F in c){var l=c[F];l&&l.remove()}Y&&(Y.h(),Y=null)}};b.za&&ka.Od(b.za);return ka}};
function Ya(){var b=null,c=null,f=null,g=0;this.$c=function(p){return b[p]};this.Ld=function(p){var u=null;g=p.length;b=p.map(function(r,t){r=Object.assign({},r,{index:t,parent:this,za:u,jd:t===g-1});return u=t=0===t?Ra.instance(r):Xa.instance(r)});c=b[0];f=b[g-1];b.forEach(function(r,t){0!==t&&r.Ed()})};this.A=function(p,u){var r=u;b.forEach(function(t){r=t.A(r,p)});return r};this.Yc=function(){return c.o()};this.cd=function(){return f.o()};this.Nb=function(){return f.bd()};this.Nd=function(p){f.Kc(p)};
this.Lb=function(){return f.Lb()};this.h=function(){b&&(b.forEach(function(p){p.h()}),f=c=b=null,g=0)}}
var Sa={instance:function(b){var c=P.instance(b.weights);delete b.weights.data;return{Y:!0,ra:function(){return 1},h:function(){c.remove()},dd:function(){return c},A:function(){C.set("s26");c.a(1);J.g(!1,!1)}}}},Va={instance:function(b){var c=b.fromLayerSize,f=P.instance(b.weights);delete b.weights.data;return{Y:!0,ra:function(){return c},h:function(){f.remove()},A:function(g){if(g.isEnabled){C.set("s24");g.md.a(3);var p,u=Math.min(g.layers.length,g.depth);for(p=0;p<u;++p)g.layers[p].Ec(4+p)}else C.set("s23");
C.B("u16",b.toLayerSize);f.a(1);J.g(!1,!1)}}}},Ta={instance:function(b){for(var c=b.fromLayerSize,f=b.toLayerSize,g=b.toSparsity,p=g*f,u=p/c,r=c/f,t=0,d=0,w=0,B=Array(g*f*g*f*4),e=Array(g*f*g*f*4),y=Array(c*c),h=0;h<y.length;++h)y[h]=0;h=Math.floor(g/2);for(var D=.5/f,K=.5/c,A=.5/p,n=0;n<f;++n)for(var v=Math.round(n*r),E=0;E<f;++E){var M=Math.round(E*r),q=n/f,m=E/f;q+=D;m+=D;for(var H=0;H<g;++H){var L=v+H-h;0>L&&(L+=c);L>=c&&(L-=c);for(var Y=0;Y<g;++Y){var ka=t/p,F=d/p,l=M+Y-h;0>l&&(l+=c);l>=c&&(l-=
c);var I=L/c,O=l/c;F=1-F-1/p;I+=K;O+=K;ka+=A;F+=A;var k=n*g+H,ca=E*g+Y;ca=f*g-ca-1;k=ca*f*g+k;B[4*k]=ka;B[4*k+1]=F;B[4*k+2]=I;B[4*k+3]=O;O=y[l*c+L]++;k=O%u;I=L*u+k;l=l*u+(O-k)/u;l=c*u-1-l;l=l*c*u+I;e[4*l]=ka;e[4*l+1]=F;e[4*l+2]=q;e[4*l+3]=m;++t>=p&&(t=0,++d);++w}}}y=null;var da=P.instance(b.weights);delete b.weights.data;var X=P.instance({width:p,isFloat:!0,array:new Float32Array(e),isPot:!0});e=null;var ia=P.instance({width:p,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;return{Y:!0,ra:function(){return u},
h:function(){X.remove();ia.remove();da.remove()},A:function(){C.set("s22");da.a(1);ia.a(2);J.g(!1,!1)}}}},Wa={instance:function(b){var c=b.kernelsNumber,f=b.toSparsity,g=f*b.toLayerSize/b.fromLayerSize,p=P.instance(b.weights);delete b.weights.data;return{Y:!0,ra:function(){return g},ze:function(){return f},dd:function(){return p},h:function(){p.remove()},A:function(){C.set("s25");C.B("u22",c);C.B("u23",f);C.B("u16",b.toLayerSize);C.B("u24",b.fromLayerSize);p.a(1);J.g(!1,!1)}}}},Ua={instance:function(b,
c){var f=b.fromLayerSize,g=b.toLayerSize,p=b.toSparsity,u=b.stride?b.stride:1,r=p*g/f,t=g<f,d=f/g,w=P.instance(b.weights);delete b.weights.data;var B="s47"+[f.toString(),g.toString(),p.toString(),u.toString(),c].join("_");C.Sc(B)||(b=va(c),g=[{type:"1f",name:"u16",value:g},{type:"1f",name:"u30",value:u}],t&&g.push({type:"1f",name:"u24",value:f}),f=[(t?r:p).toFixed(1),b],t&&f.push(d.toFixed(1)),C.Rb(t?"s39":"s38",B,f),C.G(B,g.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",
name:"u13",value:3}])));return{Y:!1,ra:function(){return r},h:function(){w.remove()},A:function(){C.set(B);w.a(3);J.g(!1,!1)}}}},Pa={instance:function(b){var c=b.Zb?b.Zb:3,f=b.Tb?b.Tb:64,g=b.ec?b.ec:64,p=b.kd?!0:!1;b={isFloat:!1,width:f,isPot:!1,isFlipY:!1};var u=P.instance(b),r=P.instance(b),t=P.instance(b),d=P.instance(b),w=P.instance({isFloat:!0,width:g,isPot:!1,isFlipY:!1}),B=1/f;return{process:function(e){C.set("s35");d.l();J.g(p,!1);C.set("s36");for(var y=0;y<c;++y)u.l(),C.ca("u7",B,0),J.g(p,
!1),t.l(),d.a(0),J.g(p,!1),r.l(),u.a(0),C.ca("u7",0,B),J.g(p,!1),d.l(),t.a(0),J.g(p,!1),y!==c-1&&r.a(0);C.set("s37");w.l();e.a(0);r.a(1);d.a(2);J.g(p,!1);w.a(0)},Nb:function(){return w}}}};function Za(b,c){b[c]=!0;b.setAttribute(c,"true")}function $a(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function ab(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}
function cb(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function db(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function eb(b){if(!b)return b;var c=!1;if(b.video){var f=function(g){var p={};"undefined"!==typeof g.min&&(p.min=g.min);"undefined"!==typeof g.max&&(p.max=g.max);"undefined"!==typeof g.ideal&&(p.ideal=g.ideal);return p};c={};"undefined"!==typeof b.video.width&&(c.width=f(b.video.width));"undefined"!==typeof b.video.height&&(c.height=f(b.video.height));"undefined"!==typeof b.video.facingMode&&(c.facingMode=b.video.facingMode)}c={audio:b.audio,video:c};"undefined"!==typeof b.deviceId&&(c.deviceId=b.deviceId);
return c}function fb(b){var c=b.video.width;b.video.width=b.video.height;b.video.height=c;return b}
function gb(b){function c(e){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(y,h){return Math.abs(y-e)-Math.abs(h-e)})}function f(e){var y=eb(b);g.push(e(y))}var g=[];if(!b||!b.video)return g;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var p=c(b.video.width.ideal).slice(0,3),u=c(b.video.height.ideal).slice(0,3),r={},t=0;for(r.R=void 0;t<p.length;r={R:r.R},++t){r.R=p[t];var d={},w=0;for(d.P=void 0;w<u.length;d={P:d.P},++w)if(d.P=u[w],
r.R!==b.video.width.ideal||d.P!==b.video.height.ideal){var B=Math.max(r.R,d.P)/Math.min(r.R,d.P);B<4/3-.1||B>16/9+.1||f(function(e,y){return function(h){h.video.width.ideal=e.R;h.video.height.ideal=y.P;return h}}(r,d))}}}f(function(e){return fb(e)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&f(function(e){delete e.video.width.ideal;delete e.video.height.ideal;return e}),f(function(e){delete e.video.width;delete e.video.height;return e}));b.video.facingMode&&(f(function(e){delete e.video.facingMode;
return e}),b.video.width&&b.video.height&&f(function(e){fb(e);delete e.video.facingMode;return e}));g.push({audio:b.audio,video:!0});return g}function hb(b){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(g){c=window.innerHeight>window.innerWidth}if(c&&b&&b.video){c=b.video.width;var f=b.video.height;c&&f&&c.ideal&&f.ideal&&c.ideal>f.ideal&&(b.video.height=c,b.video.width=f)}}
function ib(b){b.volume=0;Za(b,"muted");if(cb()){if(1===b.volume){var c=function(){b.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){b.volume=0;Za(b,"muted")},5)}}
function jb(b,c,f,g){function p(r){u||(u=!0,f(r))}var u=!1;navigator.mediaDevices.getUserMedia(g).then(function(r){function t(){setTimeout(function(){if(b.currentTime){var d=b.videoWidth,w=b.videoHeight;if(0===d||0===w)p("VIDEO_NULLSIZE");else{d&&(b.style.width=d.toString()+"px");w&&(b.style.height=w.toString()+"px");d={Ic:null,Rd:null,rd:null};try{var B=r.getVideoTracks()[0];B&&(d.rd=B,d.Ic=B.getCapabilities(),d.Rd=B.getSettings())}catch(e){}cb()||$a()?b.parentNode&&null!==b.parentNode?(u||c(b,r,
d),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),ib(b),u||c(b,r,d),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";ib(b);setTimeout(function(){b.play()},100)},80)):u||c(b,r,d)}}else p("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=r:(b.src=window.URL.createObjectURL(r),b.videoStream=r);ib(b);b.addEventListener("loadeddata",function(){var d=b.play();ib(b);"undefined"===typeof d?
t():d.then(function(){t()}).catch(function(){p("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(r){p(r)})}
function kb(b,c,f){var g=db()?document.createElement("video"):!1;if(g)if(db()){if(f&&f.video){if($a()){var p=ab();(12>p[0]||12===p[0]&&2>p[1])&&hb(f)}f.video.width&&f.video.width.ideal&&(g.style.width=f.video.width.ideal+"px");f.video.height&&f.video.height.ideal&&(g.style.height=f.video.height.ideal+"px")}Za(g,"autoplay");Za(g,"playsinline");f&&f.audio?g.volume=0:Za(g,"muted");jb(g,b,function(){function u(t){if(0===t.length)c("INVALID_FALLBACKCONSTRAINTS");else{var d=t.shift();jb(g,b,function(){u(t)},
d)}}var r=gb(f);u(r)},f)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}
var lb=function(){var b=0,c,f,g,p;return{j:function(u,r){b=u.length;c=r;f=u;g=new Float32Array(b);p=new Float32Array(b)},ad:function(){return p},Sd:function(u,r,t){u.forEach(function(d,w){var B=Math.min(1,f[w]*t*(r+.33*(1-r)));d=B*d+(1-B)*g[w];g[w]=d;p[w]=c[w](d)})}}}(),V={U:[],Ja:!1,Ka:!1,Ia:!1,pb:!1,ga:!0,fa:!1,ready:!1,initialized:!1},mb={facingMode:"user",idealWidth:320,idealHeight:240,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},a={save:"jeelizFaceTransferNNC.json",
mb:"../../",zc:0,width:512,height:512,sd:.25,nd:.7,yd:3,borderWidth:.4,ba:.35,zd:5,Ad:3,jb:[.06,.08,.15],Wd:55,td:.6,od:5.8,vc:.75,uc:1,rb:[.03,1],$d:20,ia:.2,V:[30,55],nb:3,Cc:1/3.5,bc:11,Yb:1,wd:1,sb:[.1,.01],Id:[.4,-.7,-.4],Jd:[.3,0,0],lc:[5,7],Qc:!1,X:[0,7],Ac:.001,tb:[Math.PI/10,Math.PI/6],hc:[0,6],ic:[.1,.4],jc:[.009,.02],kc:[.02,.04],ab:8,Qb:[3,7],Pb:.05,yc:[.2,.2,.15,.15,.15,.15,.2,.2,.15,.15,.2],xd:[ra.bind(null,.05,.7),ra.bind(null,.05,.7),ra.bind(null,0,.4),ra.bind(null,0,.4),ra.bind(null,
0,.6),ra.bind(null,0,.6),ta.bind(null,.1,.6),ra.bind(null,.1,.4),ua.bind(null,.68,.77,2),ua.bind(null,.68,.77,2),ra.bind(null,.15,.5)]};V.get_nMorphs=function(){return a.bc};var nb=null,ob=null,pb=null,qb=[];
function rb(){function b(){1===++O&&(lb.j(a.yc,a.xd),c(),V.ready=!0,V.U.forEach(function(G){G()}),V.U.splice(0,V.U.length),f(),O=0)}function c(){q=ja();m=new Uint8Array(h*h*4);V.get_morphTargetInfluences=function(){return q};V.get_morphTargetInfluencesStabilized=function(){return lb.ad()};V.set_morphUpdateCallback=function(G){H=G};V.get_rotation=function(){return Y};V.get_positionScale=function(){var G=E.qc.Zc();G.Oa();G=G.fb();l[0]=1-G[1][0];l[1]=G[2][0];l[2]=G[3][0]*K[0];return l};V.get_rotationStabilized=
function(){return F};V.switch_sleep=function(G){ca!==k.Ea||G?ca=G?k.Ea:k.pa:f()};V.on_detect=function(G){G(da.J);da.bb.push(G)};V.is_detected=function(){return da.J};V.set_animateDelay=function(G){w=G}}function f(){ca!==k.pa&&(ca=k.pa,X.timestamp=Date.now(),g(),u())}function g(){B&&(window.clearTimeout(B),B=null);e&&(window.cancelAnimationFrame(e),e=null)}function p(){ca!==k.Ea&&(B=setTimeout(u,w))}function u(){a:{if("VIDEO"===I.element.nodeName){var G=I.element.currentTime-S;0>G&&(S=I.element.currentTime);
if(1E3*G<a.$d)break a;S+=G}I.da.refresh();G=ma.Ob();G[0]===I.la[0]&&G[1]===I.la[1]||ma.tc();C.set("s49");La.H();E.Xa.F();I.da.a(0);J.g(!1,!0)}G=ca===k.pa?X.xa:1;for(var N=0;N<G;++N){var Z=E,pa=y;C.set("s50");La.H();Z.ta.F();Z.Xa.a(0);Z.Fa.a(1);J.g(!1,!1);Z.ta.a(0);pa.A(!1,Z.ta)}V.ga&&(La.Yd(),C.set("s5"),E.Xa.a(0),J.g(!1,!1),x.enable(x.BLEND),x.blendFunc(x.SRC_ALPHA,x.ONE),M.a(0),J.g(!1,!1),x.disable(x.BLEND));x.flush();N=Date.now();Z=N-X.timestamp;X.timestamp=N;X.$b=G/Z;X.$a=X.$b*a.ia+X.$a*(1-a.ia);
X.ac=1E3/Z;X.W=X.ac*a.ia+X.W*(1-a.ia);X.W>a.V[1]?(++X.xa,X.W=(a.V[0]+a.V[1])/2):X.W<a.V[0]&&(X.xa=Math.max(X.xa-1,a.nb),X.W=(a.V[0]+a.V[1])/2);X.ka=a.Cc/Math.max(X.$a,.001);ca!==k.Ea&&(e=window.requestAnimationFrame(p))}var r=-1,t=-1,d=64,w=a.zc,B=!1,e=!1,y=null,h=0,D=null,K=null,A=null,n=0,v=0,E={},M=null,q=null,m=null,H=null,L=[0,0,0],Y=[0,0,0],ka=[0,0,0],F=[0,0,0],l=[0,0,0],I={element:null,da:null,la:[-1,-1]},O=0,k={Nc:-4,Cd:-3,Je:-2,Ea:-1,pa:0},ca=k.Cd,da={ua:0,J:!1,bb:[]},X={timestamp:0,$b:0,
$a:0,xa:a.nb,ac:0,W:0,ka:1},ia=1,Ba=1,Da=1,Ca=1,la=[0,0,0],sa=Date.now(),qa=new Float32Array(a.ab),R=0,S=0,ma={Sb:function(){r=a.width;t=a.height;n=a.sd;v=a.nd;var G=r/d;n*=G;v*=G;D={Ud:(1-2*a.borderWidth)/a.zd,Vd:(1-2*a.ba)/a.Ad,Td:(v-n)/a.yd,ud:a.borderWidth,vd:a.ba,pd:1-a.borderWidth,qd:1-a.ba};A={n:0,x:a.borderWidth,y:a.ba,scale:n};K=[d/r,d/t]},pc:function(){C.G("s50",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u32",value:1},{type:"2f",name:"u33",value:K}]);C.G("s51",[{type:"1i",name:"u32",
value:0},{type:"2f",name:"u33",value:K},{type:"3f",name:"u34",value:[0,.5,1]}]);C.G("s52",[{type:"1i",name:"u35",value:0},{type:"1i",name:"u32",value:1},{type:"1f",name:"u36",value:a.td},{type:"1f",name:"u37",value:a.od},{type:"1f",name:"u38",value:a.Wd},{type:"1f",name:"u39",value:a.vc},{type:"1f",name:"u40",value:a.uc},{type:"1f",name:"u41",value:K[0]}]);C.G("s53",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u5",value:1},{type:"1f",name:"u42",value:a.rb[0]},{type:"1f",name:"u43",value:a.rb[1]}])},
Lc:function(){C.xc([{id:"s49",name:"_",ea:"attribute vec2 a0;uniform vec2 u44,u45;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u45+u44*a0;}",ha:["a0"],$:[2],b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1","u44","u45"],precision:"lowp"},{id:"s50",name:"_",b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ea:"attribute vec2 a0;uniform sampler2D u32;uniform vec2 u33;const vec2 f=vec2(.25,.5),h=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u32,f);vec2 b=a.gb,c=a.a*u33,d=a0*.5+e;vv0=b+(d-e)*c,gl_Position=vec4(a0,0.,1.);}",
ha:["a0"],$:[2],c:["u1","u32","u33"],precision:"lowp"},{id:"s52",name:"_",ea:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",b:"uniform sampler2D u35,u32;uniform vec3 u46,u47;uniform float u36,u37,u38,u39,u40,u41,u48;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 d=texture2D(u35,vec2(.4375,.9375)),f=texture2D(u35,vec2(.5625,.9375)),a=texture2D(u32,vec2(.5,.5));float c=dot(d,e),g=dot(f,e);bool h=c>u39&&c>g+u40;h?a.r=2.:a.r>u38?a.r=0.:a.r>1.9&&(a.a>u37||a.a<u36)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u46,a.r=1.;else{float i=dot(e,texture2D(u35,vec2(.0625,.9375))),j=dot(e,texture2D(u35,vec2(.1875,.9375))),k=dot(e,texture2D(u35,vec2(.3125,.9375))),b;if(a.r>1.9)b=1.-u48;else b=1.,a.r=0.;float l=a.a*u41;a.gba+=vec3(i,j,k)*u47*b*l;}gl_FragColor=a;}",
c:"u35 u32 u46 u36 u37 u38 u39 u40 u47 u41 u48".split(" ")},{id:"s51",name:"_",b:"uniform sampler2D u32;uniform vec3 u34;uniform vec2 u33;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 f=texture2D(u32,vec2(.25,.5));vec2 g=f.gb;float j=f.a;vec2 a=j*u33,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),h=step(d,vv0)*step(vv0,c);float l=h.x*h.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u34*max(b.x,b.y),1.);}",c:["u32","u33","u34"],precision:"lowp"},{id:"s53",name:"_",b:"uniform sampler2D u1,u5;uniform float u42,u43,u48;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);float c=(1.-u48)*(u43-u42)+u42;gl_FragColor=mix(b,a,c*f);}",
c:["u1","u5","u42","u43","u48"]}])},fd:function(G){var N=new Float32Array([0,a.borderWidth,a.ba,0]);G.Xa=P.instance({isPot:!1,Ie:!0,isFloat:!1,width:r,height:t});G.ta=P.instance({isPot:!0,isFloat:!1,width:d});N={width:1,height:1,isFloat:!0,isPot:!1,array:N};G.Fa=Na.instance(N);G.qc=Na.instance(N)},Mc:function(){I.da=P.instance({u:I.element,isPot:!1,isFloat:!1,isFlipY:!0});M=P.instance({isPot:!1,isFloat:!1,width:r,height:t})},j:function(){function G(){var ha=N(a.Qb[0],a.Qb[1]);da.ua=a.Pb*ha+(1-a.Pb)*
da.ua;.6<da.ua&&!da.J?(da.bb.forEach(function(U){U(!0)}),da.J=!0):.4>da.ua&&da.J&&(da.bb.forEach(function(U){U(!1)}),da.J=!1)}function N(ha,U){ha+=h*U;return(m[4*ha]+m[4*ha+1]+m[4*ha+2]+m[4*ha+3])/1020}function Z(){q.forEach(function(ha,U){if(da.J){ha=(a.Yb+U)%h;var Q=a.wd+Math.floor((a.Yb+U)/h);Q=h-1-Q;ha=N(ha,Q);q[U]=ha}else q[U]=0})}function pa(ha){y=new Ya;y.Ld(ha.layers);y.Nd({dc:"gpuRaw",Dd:function(U){var Q=E;Q.Fa.nc(1);x.viewport(0,0,1,1);C.set("s52");C.B("u48",ia);C.oc("u46",A.x,A.y,A.scale);
C.oc("u47",1*a.jb[0],1*a.jb[1],1*a.jb[2]);J.g(!1,!1);1!==++A.n%2&&(A.scale+=D.Td,A.scale>v&&(A.x+=D.Ud,A.scale=n,A.x>D.pd&&(A.x=D.ud,A.y+=D.Vd,A.y>D.qd&&(A.y=D.vd))));Q.qc.nc(1);C.set("s53");C.B("u48",ia);Q.Fa.a(0);J.g(!1,!1);P.Hd(U,m);Z();if(!a.Qc&&da.J)for(U=0;3>U;++U)Q=N(U+a.lc[0],a.lc[1]),Q=(2*Q-1)*a.Id[U],Q+=a.Jd[U],L[U]=Q;G();U=Date.now();Q=U-sa;var ba=N(a.hc[0],a.hc[1]);Da=ta(a.ic[0],a.ic[1],ba);ba=N(a.X[0],a.X[1]);var fa=N(a.X[0]+1,a.X[1]),oa=N(a.X[0]+2,a.X[1]);Ba=1-ta(a.kc[0],a.kc[1],Math.sqrt(ba*
ba+fa*fa+oa*oa)/Q);ba=la[0]-L[0];fa=la[1]-L[1];oa=la[2]-L[2];Q=Math.sqrt(ba*ba+fa*fa+oa*oa)/Q;la[0]=L[0];la[1]=L[1];la[2]=L[2];Ca=1-ta(a.jc[0],a.jc[1],Q);ia=Da*Ba*Ca;sa=U;qa[R]=ia;R=(R+1)%a.ab;for(U=0;U<a.ab;++U)ia=Math.min(qa[U],ia);lb.Sd(q,ia,X.ka);H&&H(ia,X.ka);if(da.J)for(U=a.sb[1]*ia+a.sb[0]*(1-ia),U*=X.ka,Q=0;3>Q;++Q)Y[Q]=U*L[Q]+(1-U)*Y[Q],F[Q]=Y[Q];else U=Date.now()*a.Ac,ka[0]=a.tb[0]*Math.sin(U),ka[1]=a.tb[1]*Math.cos(U),F[0]=ka[0],F[1]=ka[1],F[2]=ka[2];U=E;La.H();M.F();C.set("s51");U.Fa.a(0);
J.g(!1,!1)}});ha=y.Yc();ha!==d&&(d=ha,ma.Sb(),E.ta.resize(d,d),ma.pc());h=y.cd();b()}ma.Mc();ma.fd(E);pb?pa(pb):ea(function(ha){ha=JSON.parse(ha);pa(ha)})},h:function(){g();y&&(y.h(),y=null);ca=k.Nc},Jc:function(G){V.Ja&&V.Ja();var N={video:{facingMode:{ideal:mb.facingMode},width:{min:mb.minWidth,max:mb.maxWidth,ideal:mb.idealWidth},height:{min:mb.minHeight,max:mb.maxHeight,ideal:mb.idealHeight}},audio:V.pb};mb.deviceId&&(constraints.deviceId=mb.deviceId);kb(function(Z,pa){nb=pa;V.Ka&&V.Ka();G(Z)},
function(){window.Ha&&window.Ha("WEBCAM_UNAVAILABLE")},N)},Xb:function(G,N){ma.Lc();I.element=G;ob=I.element;ma.tc();ma.Sb();ma.pc();ma.j();N&&N()},Ob:function(){var G=[-1,-1],N=I.element;"VIDEO"===N.nodeName?(G[0]=N.videoWidth,G[1]=N.videoHeight):(G[0]=N.width,G[1]=N.height);return G},tc:function(){var G=ma.Ob();I.la[0]=G[0];I.la[1]=G[1];Ma.qa().width=G[0];Ma.qa().height=G[1];a.width=G[0];a.height=G[1];var N=[.5,.5],Z=G[1]/G[0];G=Ma.I()/Ma.o();Z>G?1>=Z?N[0]*=Z:N[1]/=Z:(N[0]*=Z,Z=1/G,N[0]*=Z,N[1]*=
Z);N[1]*=G;C.G("s49",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u44",value:N},{type:"2f",name:"u45",value:[.5,.5]}])}};qb.push(ma);return ma}V.onLoad=function(b){V.ready?b():V.U.push(b)};V.set_audio=function(b){V.pb=b};V.switch_displayVideo=function(b){V.ga=b;V.fa&&(V.fa.style.display=V.ga?"block":"none")};V.onWebcamAsk=function(b){V.Ja=b};V.onContextLost=function(b){V.Ia=b};V.onWebcamGet=function(b){V.Ka=b};
V.destroy=function(){ob&&ob.srcObject&&ob.srcObject.getTracks().forEach(function(b){b.stop()});qb.forEach(function(b){b.h()});qb.splice(0);Ma.h();V.switch_displayVideo(!1);V.initialized=!1;V.U.splice(0)};V.set_size=function(b,c){a.width=b;a.height=c};V.get_size=function(){return{width:a.width,height:a.height}};V.get_videoStream=function(){return nb};V.get_video=function(){return ob};V.get_cv=function(){return Ma.qa()};V.set_color=function(b){C.G("s51",[{type:"3f",name:"u34",value:b}])};
V.init=function(b){var c=rb(),f=b.callbackReady?b.callbackReady:function(p){console.log("ERR:",p)},g=b.callbackReady?b.callbackReady.bind(!1):!1;if("undefined"===typeof b.canvasId)f("NO_CANVASID");else if(document.getElementById(b.canvasId))if(V.initialized)f("ALREADY_INITIALIZED");else{V.initialized=!0;window.Ha=f?function(p){f(p);window.Ha=!1}:!1;b.NNCpath&&(a.mb=b.NNCpath);"undefined"!==typeof b.NNC&&(pb="string"===typeof b.NNC?JSON.parse(b.NNC):b.NNC);g&&V.U.push(g);if(!Ma.j({Ab:b.canvasId,width:a.width,
height:a.height,debug:!1,Ya:!1,cc:function(){V.Ia&&V.Ia()},premultipliedAlpha:!1}))return f("GL_INCOMPATIBLE"),!1;V.fa=Ma.qa();V.ga||(V.fa.style.display="none");J.j();La.j();C.j();P.j();x.depthFunc(x.LEQUAL);x.clearDepth(1);b.videoSettings&&b.videoSettings.videoElement?c.Xb(b.videoSettings.videoElement,!1):(b.videoSettings&&Object.assign(mb,b.videoSettings),c.Jc(function(p){c.Xb(p,!1)}));return!0}else f("INVALID_CANVASID")};window.JEEFACETRANSFERAPI=V;
;if(typeof(module)!=='undefined'){module.exports=window.JEEFACETRANSFERAPI;}
